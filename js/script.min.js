var campus={map:"Building/(Campus)/campus.html",buildings:[{id:"2",name:"2000",dir:"Building/2000/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[]}]},{id:"3",name:"3000",dir:"Building/3000/",floorIndex:1,floors:[{id:"1",map:"First-Floor.html",roomNames:[]},{id:"2",map:"Second-Floor.html",roomNames:[]},{id:"3",map:"Third-Floor.html",roomNames:[]},{id:"4",map:"Fourth-Floor.html",roomNames:[]}]},{id:"A",name:"Building A",dir:"Building/A/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"food-court",id:"1800"},{name:"chick-fil-a",id:"chickfila"},{name:"CFA",id:"chickfila"},{name:"chickfila",id:"chickfila"},{name:"chick-fil",id:"chickfila"},{name:"chick",id:"chickfila"},{name:"panda-express",id:"pandaexpress"},{name:"panda",id:"pandaexpress"},{name:"moe-s-southwest-grill",id:"moes"},{name:"moe-s",id:"moes"},{name:"moes",id:"moes"},{name:"pod-market",id:"1825"},{name:"pod",id:"1825"},{name:"the-den",id:"1510"},{name:"den",id:"1510"},{name:"dining-services",id:"1850"},{name:"technology-help-desk",id:"1040"},{name:"help-desk",id:"1040"}]}]},{id:"B",name:"Building B",dir:"Building/B/",floorIndex:0,floors:[{id:"1",map:"first-floor.html",roomNames:[{name:"einstein-bros-bagels",id:"einsteinbrosbagels"},{name:"einstein-bros",id:"einsteinbrosbagels"},{name:"einstein-s",id:"einsteinbrosbagels"},{name:"einsteins",id:"einsteinbrosbagels"},{name:"einstein",id:"einsteinbrosbagels"},{name:"ein",id:"einsteinbrosbagels"}]},{id:"2",map:"second-floor.html",roomNames:[{name:"human-resources",id:"2500"}]},{id:"3",map:"third-floor.html",roomNames:[{name:"president-s-office",id:"3500"},{name:"office-of-the-president",id:"3500"}]}]},{id:"C",name:"Building C",dir:"Building/C/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"cisco-auditorium",id:"1260"},{name:"cisco",id:"1260"}]},{id:"2",map:"Second-Floor.html",roomNames:[]}]},{id:"W",name:"Building W",dir:"Building/W/",floorIndex:0,floors:[{id:"1",map:"Ground-Floor.html",roomNames:[{name:"acedemic enhancement center",id:"1160"},{name:"aec",id:"1160"}]},{id:"2",map:"First-Floor.html",roomNames:[{name:"public-safety",id:"2501"},{name:"public-safety-office",id:"2501"},{name:"Office-of-public-safety",id:"2501"},{name:"campus-police",id:"2501"},{name:"police",id:"2501"},{name:"campus-security",id:"2501"},{name:"onestop",id:"onestop"},{name:"one-stop",id:"onestop"},{name:"one-stop-shop",id:"onestop"},{name:"testing-services",id:"2301"},{name:"testing",id:"2301"},{name:"disability-service",id:""},{name:"disability",id:""},{name:"parking-services",id:"2123"},{name:"parking",id:"2123"},{name:"registrar",id:"2129"},{name:"registrar-office",id:"2129"},{name:"student-accounts",id:"2147"}]},{id:"3",map:"Second-Floor.html",roomNames:[{name:"office-of-internationalization",id:"3100"},{name:"internationalization",id:"3100"}]}]},{id:"D",name:"Building D",dir:"Building/D/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[]},{id:"2",map:"Second-Floor.html",roomNames:[]}]},{id:"E",name:"Building E",dir:"Building/E/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"Game-Room",id:"gameroom"},{name:"game",id:"gameroom"},{name:"Dining-Hall",id:"dininghall"},{name:"Dining-Area",id:"dininghall"},{name:"Dining",id:"dininghall"},{name:"Multi-Purpose-room",id:"multipurposeroom"},{name:"multi",id:"multipurposeroom"},{name:"multi-purpose",id:"multipurposeroom"},{name:"Private-Dining",id:"privatedining"},{name:"private",id:"privatedining"},{name:"Food-Stations",id:"foodstations"},{name:"Kitchen-Area",id:"kitchenarea"},{name:"Kitchen",id:"kitchenarea"},{name:"Outdoor-Dining",id:"outdoordining"},{name:"outdoor",id:"outdoordining"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"bookstore",id:"bookstore"},{name:"barnes-and-noble",id:"bookstore"},{name:"terrace",id:"terrace"},{name:"lvis",id:"lvis"},{name:"Catering-Kitchen",id:"cateringkitchen"},{name:"Kitchen",id:"cateringkitchen"},{name:"lounge",id:"lounge"},{name:"Info-Desk",id:"infodesk"},{name:"career-services",id:"2130"},{name:"career-development",id:"2130"},{name:"office-of-career-services",id:"2130"},{name:"student-integrity",id:"2150"},{name:"office-of-student-integrity",id:"2150"}]},{id:"3",map:"Third-Floor.html",roomNames:[{name:"mail-room",id:"3103"},{name:"claw-card-office",id:"3107"},{name:"claw-card",id:"3107"},{name:"office-of-get-involved",id:"3120"},{name:"get-involved",id:"3120"},{name:"student-involvement-center",id:"3130"},{name:"rso-lounge",id:"3130"},{name:"rso",id:"3130"},{name:"globe-office",id:"3151"},{name:"globe",id:"3151"},{name:"office-of-student-affairs",id:"3140"},{name:"student-affairs",id:"3140"},{name:"sga",id:"3132"},{name:"sga-office",id:"3132"},{name:"office-of-sga",id:"3132"},{name:"office-of-the-student-government-association",id:"3132"},{name:"student-government",id:"3132"},{name:"office-of-volunteer-ggc",id:"3133"},{name:"volunteer-ggc",id:"3133"},{name:"volunteer",id:"3133"},{name:"office-of-greenlight-activities-board",id:"3134"},{name:"greenlight-office",id:"3134"},{name:"greenlight",id:"3134"}]}]},{id:"F",name:"Building F",dir:"Building/F/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"classroom",id:"classroom"},{name:"mechanical",id:"mechanical"},{name:"Jr-Olympic-Pool",id:"jrolympicpool"},{name:"Swimming-Pool",id:"jrolympicpool"},{name:"Pool",id:"jrolympicpool"},{name:"Basketball-Court",id:"basketballcourt"},{name:"Basketball",id:"basketballcourt"},{name:"Racquet",id:"racquetballcourt1"},{name:"Racquet-Ball",id:"racquetballcourt1"},{name:"Racquet-Ball-Court",id:"racquetballcourt1"},{name:"Racquet-Ball-Court-1",id:"racquetballcourt1"},{name:"Racquet-Ball-Court-2",id:"racquetballcourt2"},{name:"Racquet-Ball-Court-3",id:"racquetballcourt3"},{name:"Mens-Lockers",id:"menslockers"},{name:"Mens-Locker",id:"menslockers"},{name:"menlocker",id:"menslockers"},{name:"Men-Locker",id:"menslockers"},{name:"Mens-Locker-Room",id:"menslockers"},{name:"Men-s-Lockers",id:"menslockers"},{name:"Men-s-Locker-Room",id:"menslockers"},{name:"Womens-Lockers",id:"womenslockers"},{name:"womenlocker",id:"womenslockers"},{name:"Women-Locker",id:"womenslockers"},{name:"Womens-Locker",id:"womenslockers"},{name:"Women-s-Lockers",id:"womenslockers"},{name:"Women-s-Locker-Room",id:"womenslockers"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"Weight-Machines",id:"weightmachines"},{name:"Free-Weights",id:"freeweights"},{name:"Weight-Room",id:"freeweights"},{name:"Weights-Room",id:"freeweights"},{name:"Aerobics",id:"aerobics"},{name:"Spin-Room",id:"spinroom"},{name:"Cardio",id:"cardio"},{name:"Elevated-Track",id:"elevatedtrack"},{name:"Indoor-Track",id:"elevatedtrack"},{name:"Track",id:"elevatedtrack"}]}]},{id:"H",name:"Building H",dir:"Building/H/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"digital-media-lab",id:"1210"},{name:"digital-media",id:"1210"}]},{id:"2",map:"Second-Floor.html",roomNames:[]},{id:"3",map:"Third-Floor.html",roomNames:[]}]},{id:"I",name:"Building I",dir:"Building/I/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[]},{id:"2",map:"Second-Floor.html",roomNames:[]},{id:"3",map:"Third-Floor.html",roomNames:[]}]},{id:"L",name:"Building L",dir:"Building/L/",floorIndex:0,floors:[{id:"1",map:"First-Floor.html",roomNames:[{name:"starbucks",id:"1102"},{name:"circulation-desk",id:"1136"}]},{id:"2",map:"Second-Floor.html",roomNames:[{name:"reference-desk",id:"2101"}]},{id:"3",map:"Third-Floor.html",roomNames:[{name:"heritage-room",id:"3148"},{name:"archives-and-special-collections",id:"3146"},{name:"grand-reading-room",id:"3111"},{name:"grand-reading",id:"3111"},{name:"quiet-reading-room",id:"3111"},{name:"quiet-reading",id:"3111"},{name:"reading-room",id:"3111"},{name:"quiet-room",id:"3111"}]}]}]};function getEvents(){debug.group("Getting Events"),Storage.prototype.setObj=function(e,o){this.setItem(e,JSON.stringify(o))};var e=0,o=[],t=new XMLHttpRequest;t.open("GET","https://cors-anywhere.herokuapp.com/http://www.ggc.edu/student-life/events-calendar/events-calendar/summary"),t.send(null),t.onreadystatechange=function(){if(4==t.readyState){var n,i=(new DOMParser).parseFromString(t.responseText,"text/html").querySelectorAll(".SECalendarSummaryDate");for(const t of i)if("SECalendarSummaryDate"!=t.className)debug.msg(!1);else if(t.querySelectorAll(".SECalendarPropertyContainer").length>1)for(var a=0;a<t.querySelectorAll(".SECalendarPropertyContainer").length;a++)n=t.querySelectorAll(".SECalendarSummaryDateEventList"),o[e]=new Array(t.querySelector("h3").innerText,n[0].children[a].querySelector(".SECalendarEventName").innerText,n[0].children[a].children[0].children[2].innerText,n[0].children[a].children[0].children[4].innerText.replace(/^\s+|\s+$/g,"")),e+=1;else n=t.querySelectorAll(".SECalendarPropertyContainer"),o[e]=new Array(t.querySelector("h3").innerText,t.querySelector(".SECalendarEventName").innerText,n[0].children[2].innerText,n[0].children[4].innerText.replace(/^\s+|\s+$/g,"")),e+=1;localStorage.setObj("event_key",o),localStorage.setObj("eventNumber_key",e);var r=new Date;r.getFullYear(),r.getMonth();localStorage.setObj("event_updated",r.getMonth()+1+"/"+r.getDate()),checkLocalStorage()}},debug.end()}function insertEvents(e,o){debug.group("Insert Events");for(var t=new Date,n=(t.getFullYear(),t.getMonth(),/[a-zA-Z]\-[A-Z|0-9][0-9]+/),i=0;i<o;i++){var a=e[i][0].substring(e[i][0].search(t.toLocaleString("en",{month:"long"}))+t.toLocaleString("en",{month:"long"}).length,e[i][0].lastIndexOf(","));if(a>=t.getDate()&&a<=t.getDate()+14){var r=document.createElement("div");r.className="event";var d=document.createElement("div");d.className="tab-group";var s=document.createElement("h5");s.innerText=e[i][1];var l=document.createElement("p");l.innerText=e[i][0];var m=document.createElement("p");m.innerText=e[i][2];var c=document.createElement("p");c.innerText=e[i][3];var u=document.createElement("a"),g=e[i][3].replace(/ /g,""),p=e[i][3].split(", ");if(1==p[0].includes("(")){var h=p[0].search("\\("),f=p[0].search("\\)");p[0]=p[0].replace(p[0].substr(h-1,f),"")}var b=p[0].split(" "),v=!1,y=document.querySelectorAll("div#campusEvents")[0].children[0].children[2];if(1==n.test(g))u.setAttribute("onclick","closeTab('campusEvents');"),u.setAttribute("href","#"+n.exec(g)[0].replace("-","")),u.appendChild(s),u.appendChild(l),u.appendChild(m),u.appendChild(c),r.appendChild(u),d.appendChild(r),1==n.exec(g)[0].includes("C-G")?r.id="W":"C"==n.exec(g)[0].substr(0,1)&&parseInt(n.exec(g)[0].substr(2,4))>1300&&parseInt(n.exec(g)[0].substr(2,4))<2e3||"C"==n.exec(g)[0].substr(0,1)&&parseInt(n.exec(g)[0].substr(2,4))>2300&&parseInt(n.exec(g)[0].substr(2,4))<3e3?r.id="W":r.id=n.exec(g)[0].substr(0,1),y.appendChild(d);else{var C,E="";for(const e of campus.buildings){for(const o of e.floors){for(const t of o.roomNames){if(b.length>=2&&1==t.name.toLowerCase().includes(b[0].toLowerCase()+"-"+b[1].toLowerCase())){v=!0,E=t.name,C=e.id.toUpperCase();break}if(1==b.length&&1==t.name.toLowerCase().includes(b[0].toLowerCase())){debug.msg("test"),v=!0,E=t.name,C=e.id.toUpperCase();break}}if(""!==E)break}if(""!==E){debug.msg("Name from JSON: "+E);break}}if(1==v)u.setAttribute("onclick","closeTab('campusEvents');"),u.setAttribute("href","#"+E),r.id=C,u.appendChild(s),u.appendChild(l),u.appendChild(m),u.appendChild(c),r.appendChild(u),d.appendChild(r),y.appendChild(d);else if(p.length>1&&1==p[1].includes("Building")||p.length>1&&1==p[0].includes("Building"))if(1==p[1].includes("Building"))u.setAttribute("onclick","closeTab('campusEvents');"),u.setAttribute("href","#"+p[1].substr(p[1].search("Building")+9)),r.id=p[1].substr(p[1].search("Building")+9),u.appendChild(s),u.appendChild(l),u.appendChild(m),u.appendChild(c),r.appendChild(u),d.appendChild(r),y.appendChild(d);else{u.setAttribute("onclick","closeTab('campusEvents');"),u.setAttribute("href","#"+p[0].substr(p[0].search("Building")+9)+/[A-Z|0-9][0-9]+/.exec(p[1])),r.id=p[0].substr(p[0].search("Building")+9),u.appendChild(s),u.appendChild(l),u.appendChild(m),u.appendChild(c),r.appendChild(u),d.appendChild(r),y.appendChild(d)}else 2==b.length&&1==b[0].includes("Building")&&1==b[1].length?(u.setAttribute("onclick","closeTab('campusEvents');"),u.setAttribute("href","#"+b[1]),r.id=b[1],u.appendChild(s),u.appendChild(l),u.appendChild(m),u.appendChild(c),r.appendChild(u),d.appendChild(r),y.appendChild(d)):1==e[i][3].includes("Student Center")?(u.setAttribute("onclick","closeTab('campusEvents');"),u.setAttribute("href","#E"),r.id="E",u.appendChild(s),u.appendChild(l),u.appendChild(m),u.appendChild(c),r.appendChild(u),d.appendChild(r),y.appendChild(d)):(r.appendChild(s),r.appendChild(l),r.appendChild(m),r.appendChild(c),d.appendChild(r),y.appendChild(d))}}}debug.end()}function checkLocalStorage(){debug.group("Check Local Storage"),Storage.prototype.getObj=function(e){return JSON.parse(this.getItem(e))};var e=navigator.onLine,o=new Date;o.getFullYear(),o.getMonth();1==e?null==localStorage.getObj("event_key")||null==localStorage.getObj("eventNumber_key")?getEvents():localStorage.getObj("event_updated")!=o.getMonth()+1+"/"+o.getDate()?getEvents():insertEvents(localStorage.getObj("event_key"),localStorage.getObj("eventNumber_key")):null==localStorage.getObj("event_key")||null==localStorage.getObj("eventNumber_key")?debug.msg("No connection to retrieve events"):insertEvents(localStorage.getObj("event_key"),localStorage.getObj("eventNumber_key")),debug.end()}function sortEvents(){debug.group("Sort Events");var e,o=0,t=document.querySelectorAll("div.event");if(document.querySelectorAll("h5.no-events")[0].style.display="none",window.location.hash.length<=2){for(e=0;e<t.length;e++)window.location.hash.substr(1)!=t[e].id?(t[e].style.display="none",o++):window.location.hash.substr(1)==t[e].id&&(t[e].style.display="block");o==t.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}else if(1==/[A-Z][A-Z|0-9][0-9]+/.test(window.location.hash.substr(1)))if(1==window.location.hash.includes("CG")||1==window.location.hash.includes("C")&&window.location.hash.substr(2,4)>1300&&window.location.hash.substr(2,4)<1400||1==window.location.hash.includes("C")&&window.location.hash.substr(2,4)>2300&&window.location.hash.substr(2,4)<2400){for(e=0;e<t.length;e++)"W"==t[e].id?t[e].style.display="block":(t[e].style.display="none",o++);o==t.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}else{for(e=0;e<t.length;e++)window.location.hash.substr(1,1)==t[e].id?t[e].style.display="block":(t[e].style.display="none",o++);o==t.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}else if("#Campus"==window.location.hash)for(e=0;e<t.length;e++)t[e].style.display="block";else{var n;for(const e of campus.buildings)for(const o of e.floors)for(const t of o.roomNames)window.location.hash.substr(1)===t.name&&(n=e.id,debug.msg(n));for(o=0,e=0;e<t.length;e++)t[e].id==n?(t[e].style.display="block",o++):t[e].style.display="none";o==t.length&&(document.querySelectorAll("h5.no-events")[0].style.display="block")}openTab("campusEvents"),debug.end()}function cookieMold(e,o,t){debug.group("Cookie Mold");var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=e+"="+o+";"+i+";path=/",debug.end()}function eatCookie(e){debug.group("Eat Cookie");var o=e+"=",t=decodeURIComponent(document.cookie).split(";");for(let e of t){for(;" "==e.charAt(0);)e=e.substring(1);if(0===e.indexOf(o))return e.substring(o.length,e.length)}return debug.end(),""}function agreePage(e){debug.group("Agree Page"),document.cookie="agreement="+e,window.location.replace("index.html"),debug.end()}function visitCheck(){(debug.group("Visit Check"),""===eatCookie("visits")||null===eatCookie("visits"))?(cookieMold("visits",2,7),cookieMold("legend","hide",9999),cookieMold("mode","hide",9999)):(cookieMold("visits",parseInt(eatCookie("visits"))+1,1),"show"===eatCookie("legend")&&(document.getElementById("legendSwitch").checked=!0),"show"===eatCookie("mode")&&(document.getElementById("safetySwitch").checked=!0));debug.end()}function cookieLegend(){debug.group("Cookie Legend");var e=eatCookie("legend");if(null!==eatCookie("legend"))switch(e){case"hide":cookieMold("legend","show",9999),debug.msg("Now Showing");break;case"show":cookieMold("legend","hide",9999),debug.msg("Now Hiding");break;default:debug.msg("Done changing")}debug.end()}function firstLegend(){debug.group("First Legend"),""!==eatCookie("visits")&&null!==eatCookie("visits")||cookieMold("legend","hide",9999),debug.end()}var debug={active:!1,group:function(e){this.active&&console.group(e)},end:function(){console.groupEnd()},msg:function(e){this.active&&console.log(e)},error:function(e){this.active&&console.error(e)}};function switchMap(e){debug.group("Switch Map");const o={map:"",building:"",floor:"",room:"",roomName:""},{building:t,room:n,roomName:i}=parseSearch(e);o.roomName=i,debug.msg(`RoomName "${o.roomName}"`);const a=campus.buildings.find(e=>e.id.toUpperCase()===t.toUpperCase());if("campus"===t.toLowerCase())o.map=campus.map,o.building="Campus";else if(t||o.roomName){if(a)if(o.building=a.id,n){const e=a.floors.find(e=>e.id.toUpperCase()===n[a.floorIndex].toUpperCase()||e.id.toUpperCase()===o.floor.toUpperCase());e&&(o.floor=e.id,o.map=a.dir+e.map,o.room=n)}else o.floor=a.floors[0].id,o.map=a.dir+a.floors[0].map}else o.building=document.getElementById("building").innerHTML;return!o.map&&o.roomName?(alert(`Were you trying to search by nickname? Unfortunately, "${name}" is not recognized.\nPlease check your spelling, or try a more common name.\n\nExample: Search for "Moes" not "Mo"`),o.building="Campus",o.map=campus.map):o.map||(debug.error(`Did you mean to search for "${t} ${n}"?\nThat building doesn't exist.`),alert(`Did you mean to search for building ${t}?\nThat building doesn't exist.`),o.building="Campus",o.map=campus.map),debug.msg(`Building= ${o.building}`),debug.msg(`Floor= ${o.floor}`),debug.msg(`Map= ${o.map}`),debug.msg(`Room= ${o.room}`),debug.end(),o}function getFloorMap(e,o){debug.group("Get Floor Map"),o=o||"1";var t="",n=campus.buildings.find(o=>o.id.toUpperCase()===e.toUpperCase());if(n){var i=n.floors.find(function(e){return e.id.toUpperCase()===o.toUpperCase()});i&&(t=n.dir+i.map)}else"campus"===e.toLowerCase()&&(t=campus.map);return""===t&&debug.error("Map not found Building: "+e+" Floor: "+o),debug.end(),t}function addMap(e,o,t){debug.group("Add Map");var n=document.getElementById("building"),i=document.getElementById("floor"),a=document.getElementById("svg-holder");return new Promise(function(r,d){var s=new XMLHttpRequest;s.open("GET",e,!0),s.onload=function(){if(200!==s.status&&d(Error(s.statusText)),o!==n){var e=document.getElementById("building-popup"),l=document.getElementsByClassName("dropdown")[0],m=document.getElementById("sLegend"),c=document.getElementById("pLegend");"Campus"===o?(hideElement(e,HIDE),hideElement(m,HIDE),cookieMold("mode","hide",9999),document.getElementById("safetySwitch").disabled=!0,document.getElementById("fireSwitch").disabled=!0,"show"===eatCookie("legend")?(hideElement(c,SHOW),c.style.display="inherit"):(hideElement(c,HIDE),c.style.display="none")):(document.getElementById("legendSwitch").checked=!1,cookieMold("legend","hide",9999),c.style.display="none",document.getElementById("safetySwitch").disabled=!1,document.getElementById("fireSwitch").disabled=!1,hideElement(e,SHOW)),void 0!==t?(hideElement(i,SHOW),hideElement(l,SHOW),floorDropDown(o),i.innerHTML="FL"+t):(hideElement(i,HIDE),hideElement(l,HIDE))}removeMap(),a.appendChild(convertToElement(s.response));var u=a.childNodes[0];u.style.height=getClientHeight(),n.innerHTML=o;var g=svgPanZoom(u,{controlIconsEnabled:!0,fit:1,center:1,customEventsHandler:{haltEventListeners:["touchStart","touchend","touchmove","touchleave","touchcancel"],init:function(e){var t=e.instance,n=1,i=0,a=0;this.hammer=Hammer(e.svgElement,{inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("doubletap",function(e){t.zoomIn()}),this.hammer.on("panstart panmove",function(e){"panstart"===e.type&&(i=0,a=0),t.panBy({x:e.deltaX-i,y:e.deltaY-a}),i=e.deltaX,a=e.deltaY}),this.hammer.on("pinchstart pinchmove",function(e){"pinchstart"===e.type&&(n=t.getZoom(),t.zoom(n*e.scale)),t.zoom(n*e.scale)}),this.hammer.on("tap",function(e){if(toggleTab(e,"helpbox"),toggleTab(e,"campusEvents"),"Campus"===o){var t=e.target.parentNode.id;if(void 0!==t&&null!==t)for(var n in campus.buildings)if(t.toUpperCase()===campus.buildings[n].id.toUpperCase()){changeFloor(campus.buildings[n].id,campus.buildings[n].floors[0].id);break}}else{var i=e.target.parentNode.id;4!==i.length&&5!==i.length||(debug.msg("addMap calls activateRoom"),activateRoom(e.target.parentNode.id))}}),e.svgElement.addEventListener("touchmove",function(e){e.preventDefault()})},destroy:function(){this.hammer.destroy()}}});window.addEventListener("resize",function(){u.style.height=getClientHeight(),g.resize(),g.fit(),g.center()}),r(s.response)},s.onerror=function(){d(Error("Network Error"))},s.send(),debug.end()})}function removeMap(){debug.group("Remove Map");for(var e=document.getElementById("svg-holder");e.hasChildNodes();)e.removeChild(e.lastChild);debug.end()}function openMenu(){debug.group("Open Menu");var e=document.getElementsByClassName("nav")[0],o=document.getElementsByClassName("content-disable")[0];"nav"===e.className&&(e.classList.add("nav-active"),o.classList.add("active")),debug.end()}function closeMenu(){debug.group("Close Menu");var e=document.getElementsByClassName("nav")[0],o=document.getElementsByClassName("content-disable")[0];"nav nav-active"===e.className&&(e.classList.remove("nav-active"),o.classList.remove("active"));var t=document.getElementsByClassName("floors")[0];"floors floors-active"===t.className&&t.classList.remove("floors-active"),debug.end()}function subMenu(e){debug.group("Sub Menu");var o=document.getElementsByClassName(e)[0];o.className===e?o.classList.add("subMenu-active"):o.className===e+" subMenu-active"&&o.classList.remove("subMenu-active"),debug.end()}var urlTimer,HIDE=!0,SHOW=!1;function urlRoom(){if(debug.group("URL Room"),window.navigator.userAgent.indexOf("Edge")>-1);else{var e=window.location.hash,o=e.substring(e.lastIndexOf("#")+1);if(""===o||o.includes(".")||"campus"===o.toLowerCase())addMap(campus.map,"Campus").then(function(e){window.location.hash="Campus",document.getElementById("search").value=""},function(e){debug_error("Failed!",e)});else searchRoomNumber(switchMap(o))}debug.end()}function floorDropDown(e){debug.group("Floor DropDown");for(var o=document.getElementsByClassName("floors")[0];o.hasChildNodes();)o.removeChild(o.lastChild);var t=[];for(const e of campus.buildings)e.id.toUpperCase()===e.toUpperCase()&&(t=e.floors);for(const n of t){const t=`<h2 onclick="changeFloor('${e}', '${n.id}')">Floor ${n.id}</h2>`;o.appendChild(convertToElement(t))}debug.end()}function activateRoom(e,o){if(debug.group("Activate Room"),debug.msg("Attempt to activate: "+e),"4983"!==e){var t=document.getElementById(e.toLowerCase());if(null===t)alert("Sorry, room number "+e+" couldn't be found in this building.");else{var n=t.className.baseVal;if("room-group"!==n&&!o)return"room-group active-room"===n?void deactivateAllRooms():void 0;"room-group"===n&&(deactivateAllRooms(),debug.msg("Activate: "+e),t.classList.add("active-room"))}debug.end()}}function deactivateAllRooms(){debug.group("Deactivate All Rooms");var e=document.getElementsByClassName("room-group");for(const o of e)o.classList.remove("active-room");debug.end()}function changeFloor(e,o){debug.group("Change Floor"),closeMenu();var t=e.toUpperCase();document.getElementById("roomSearch").value="",t=getFloorMap(e,o),turnOffLegend(),""!==t&&addMap(t,e,o).then(function(o){window.location.hash=e,debug.msg("urlRoom stopped by changeFloor"),clearTimeout(urlTimer)},function(e){debug.error("Failed!",e)}),debug.end()}function turnOffLegend(){var e=document.getElementById("sLegend");document.getElementById("safetySwitch").checked=!1,cookieMold("mode","hide",9999),document.getElementById("fireSwitch").checked=!1,e.style.display="none"}function safetyMode(){switch(debug.group("Safety Mode"),eatCookie("mode")){case"hide":cookieMold("mode","show",9999),closeMenu();break;case"show":cookieMold("mode","hide",9999),closeMenu()}}function secondLegend(){debug.group("Second Legend"),""!==eatCookie("visits")&&null!==eatCookie("visits")||cookieMold("mode","hide",9999),debug.end()}function toggleSafetyMode(){var e=document.getElementById("sLegend"),o=document.getElementById("Safety"),t=eatCookie("mode");"show"===t?(hideElement(e,SHOW),e.style.display="inherit",o.style.display="block",closeMenu()):"hide"===t&&(hideElement(e,HIDE),e.style.display="none",o.style.display="none",closeMenu())}function searchSuggest(e){debug.group("Search Suggest");var o=document.getElementById("roomSearch").value.toUpperCase();roomList=document.getElementById("rooms");var t=[],n=[],i="undefined"!=typeof InstallTrigger,a="";if(loadSearch("Building\\AllRooms.txt"),t=document.getElementById("arrayStore").value.split(","),debug.msg(o),i){if(""==roomList.innerHTML){for(var r=0;r<t.length-1;r++)a+='<option value="'+t[r]+'" />';roomList.innerHTML="<select>"+a+"</select>"}}else{for(var d=0;d<=t.length-1;d++)t[d].includes(o)&&n.push(t[d]);debug.msg(n);for(var s=0;s<4&&s<=n.length-1;s++)a+='<option value="'+n[s]+'" />';roomList.innerHTML="<select>"+a+"</select>"}debug.end()}function loadSearch(e){return new Promise(function(o,t){debug.group("Load Search");var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){200!==n.status&&t(Error(n.statusText)),document.getElementById("arrayStore").value=n.responseText.split("\n"),o(n.response)},n.onerror=function(){t(Error("Network Error"))},n.send(),debug.end()})}function searchFromBar(e){debug.group("Search From Bar"),13!=e.which&&13!=e.keyCode||(debug.msg("searchFromBar calls searchRoomNumber"),searchRoomNumber()),debug.end()}function searchFromMenu(e){turnOffLegend(),debug.group("Search From Menu"),closeMenu(),debug.msg("searchFromMenu calls parseSearch");var o=switchMap(e);""!==o.roomName?document.getElementById("roomSearch").value=o.roomName:document.getElementById("roomSearch").value=o.building+" "+o.room,debug.msg("searchFromMenu calls searchRoomNumber"),searchRoomNumber(o),debug.end()}function searchRoomNumber(e){var o;if(debug.group("Search Room Number"),turnOffLegend(),void 0!==e?(debug.msg("Data Passed"),o=e):(debug.msg("Data Not Passed"),o=switchMap(document.getElementById("roomSearch").value)),debug.msg(o),"campus"===o.roomName.toLowerCase()||"campus"===o.building.toLowerCase())document.getElementById("roomSearch").value="",changeFloor("Campus");else{var t="4983",n=document.getElementById("building").innerHTML,i=document.getElementById("floor").innerHTML,a="",r="";""!==o.building&&(debug.msg("New Building: "+o.building),a=o.building),""!==o.floor&&(debug.msg("New Floor: "+o.floor),r=o.floor),debug.msg("New Room: "+o.room),""!==o.room&&(t=o.room);debug.group("Upper Hash"),""!==o.roomName?window.location.hash=o.roomName:window.location.hash="4983"!==t?a.toUpperCase()+"-"+t.toUpperCase():a.toUpperCase(),debug.msg("urlRoom stopped by upperHash()"),clearTimeout(urlTimer),debug.end(),n!==a||i!==r?(debug.msg("searchRoomNumber calls searchNewFloor"),searchNewFloor(a,r,t,o.map)):(debug.msg("searchRoomNumber calls activateRoom"),activateRoom(t,!0))}debug.end()}function searchNewFloor(e,o,t,n){turnOffLegend(),debug.group("Search New Floor");var i=e,a=document.getElementById("building"),r=document.getElementById("floor");a.innerHTML===e&&r.innerHTML===o||""!==(i=n)&&(debug.msg("searchNewFloor calls addMap"),addMap(i,e,o).then(function(e){debug.msg("searchNewFloor calls activateRoom"),activateRoom(t,!0)},function(e){debug.error("Failed!",e)})),debug.end()}function showHideFireRoutes(){var e=document.getElementById("fireRoute");"none"===e.style.display?e.style.display="block":e.style.display="none"}var helpFile="help.html",campusEventsFile="campusEvents.html";function openTab(e){debug.group("Open Tab"),closeMenu();var o=document.getElementById(e);if(!o.classList.contains("tab-active")){o.classList.toggle("tab-active");var t=tabContentHeight(e);o.childNodes[0].childNodes[7].style.height=t+"px"}debug.end()}function closeTab(e){debug.group("Close Tab");var o=document.getElementById(e);o.classList.contains("tab-active")&&o.classList.toggle("tab-active"),debug.end()}function tabContentHeight(e){debug.group("Tab Content Height");var o=window.innerHeight||document.body.clientHeight,t=document.getElementById(e).childNodes[0].childNodes[1].clientHeight;return debug.end(),o-t}function isLetter(e){return e.toLowerCase()!==e.toUpperCase()}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}function parseSearch(e){debug.group("Parse Search");var o=e.split(/[ \+-\s<>'"();/\\]+/),t="",n="",i="";debug.msg("Search: "+e);for(var a=0;a<o.length;a++)1===o[a].length&&isLetter(o[a])&&0===a?t=o[a]:4===o[a].length?isNumeric(o[a])?"2000"==o[a]||"3000"==o[a]?t=o[a][0]:n=o[a]:"G"===o[a].charAt(0).toUpperCase()&&isNumeric(o[a].substring(1))?(n=o[a],t="C"):(""!==i&&(i+="-"),i+=o[a]):5===o[a].length?isNumeric(o[a].substring(1))?(n=o[a].substring(1),t=o[a].charAt(0)):isNumeric(o[a].substring(0,4))?n=o[a]:(""!==i&&(i+="-"),i+=o[a]):6===o[a].length&&isNumeric(o[a].substring(1,5))?(n=o[a].substring(1),t=o[a].charAt(0)):(""!==i&&(i+="-"),i+=o[a]);""===t&&""===n&&""!==i&&isLetter(e[0])&&isNumeric(e[2])&&(t=e[0],n=e.substring(1),i=""),"C"===t.toUpperCase()&&"3"===n[1]&&(t="C3",i="");var r={building:t,room:n,roomName:i.toLowerCase()};return debug.msg(r),debug.end(),r}function activatePopup(e,o){debug.group("Activate Popup"),e.onmouseover=function(){document.getElementById(o).classList.toggle("popup-active")},e.onmouseout=function(){document.getElementById(o).classList.toggle("popup-active")},debug.end()}function convertToElement(e){debug.group("Convert to Element");var o=document.createElement("div");return o.innerHTML=e,debug.end(),o.childNodes[0]}function getClientHeight(){return(window.innerHeight||document.body.clientHeight)+"px"}function dropdown(e,o){debug.group("Drop Down"),document.getElementsByClassName(e)[0].classList.toggle(o),debug.end()}function resetWidth(e){debug.group("Reset Width"),debug.msg("resize"),e.resize(),e.fit(),e.center(),debug.end()}function hideElement(e,o){debug.group("Hide Element"),o?e.classList.contains("hide")||e.classList.toggle("hide"):e.classList.contains("hide")&&e.classList.toggle("hide"),debug.end()}function loadFile(e,o){return new Promise(function(t,n){debug.group("Load File");var i=new XMLHttpRequest;i.open("GET",o,!0),i.onload=function(){200!==i.status&&n(Error(i.statusText)),document.getElementById(e).appendChild(convertToElement(i.response)),t(i.response)},i.onerror=function(){n(Error("Network Error"))},i.send(),debug.end()})}function toggleTab(e,o){debug.group("Toggle Tab");var t=document.getElementById(o);!isDescendant(t,e.target)&&t.classList.contains("tab-active")&&t.classList.toggle("tab-active"),debug.end()}function isDescendant(e,o){debug.group("Is Decendant");for(var t=o.parentNode;null!==t;){if(t===e)return!0;t=t.parentNode}return debug.end(),!1}document.addEventListener("DOMContentLoaded",function(){debug.group("DOM Content Loaded"),loadFile("helpbox",helpFile).then(function(e){},function(e){debug.error("Failed!",e)}),loadFile("campusEvents",campusEventsFile).then(function(e){checkLocalStorage()},function(e){debug.error("Failed!",e)});var e=document.getElementById("building"),o=document.getElementById("floor"),t=document.getElementById("menu"),n=document.getElementById("search");activatePopup(e,"building-popup"),activatePopup(o,"floor-popup"),activatePopup(t,"menu-popup"),activatePopup(n,"search-popup"),urlRoom(),window.addEventListener("popstate",function(e){debug.msg("website auto calls urlRoom"),urlTimer=setTimeout(function(){urlRoom()},100)}),debug.end()});class Vertex{constructor(e,o,t,n,i){this.vertex=e,this.adjacentVertices=o,this.rooms=t,this.x=n,this.y=i}getAdjacentVertices(){return this.adjacentVertices}getX(){return this.x}getY(){return this.y}}class Room{constructor(e,o,t){this.RoomNum=e,this.x=o,this.y=t}getRoomNum(){return this.RoomNum}getX(){return this.x}getY(){return this.y}}class Hallway{constructor(e,o,t,n,i,a){this.startVertex=e,this.endVertex=o,this.roomsin=t,this.building=n,this.floor=i,this.svg=a}getStartVertex(){return this.startVertex}getEndVertex(){return this.endVertex}getRoomsIn(){return this.roomsin}getBuilding(){return this.building}getFloor(){return this.floor}getSVG(){return this.svg}cutearly(e){let o=e.getX(),t=(e.getY(),this.getSVG());t.getTotalLength();let n=t.getPointAtLength(o),i=t.slice(0,n);this.svg=i}}let hallways=[],vertices=[],rooms=[],buildings=[],floors=[];function initalizeData(){}function getStartHallway(e){for(let o=0;o<hallways.length;o++){let t=hallways[o].getRoomsIn();for(let n=0;n<t.length;n++)if(t[n].getRoomNum()==e)return hallways[o]}}function getEndHallway(e){for(let o=0;o<hallways.length;o++){let t=hallways[o].getRoomsIn();for(let n=0;n<t.length;n++)if(t[n].getRoomNum()==e)return hallways[o]}}function getClosestStairCase(e){let o=document.querySelectorAll(".staircase"),t=e.getX(),n=e.getY();for(let e=0;e<o.length;e++){let i=o[e].getX(),a=o[e].getY(),r=Math.sqrt(Math.pow(t-i,2)+Math.pow(n-a,2));if(0==e)o[e];else r<closestDistance&&(closest=o[e],closestDistance=r)}return closest}function goToFloor(e,o){}function pickFirstVertex(e,o){let t=getStartHallway(e),n=getEndHallway(o);o.getX(),o.getY();if(t==n)return t.cutSvg(o)}